
<app-header></app-header>
<div class="main">
  <h2>Mon panier</h2>
    @if (panier$ | async ; as data) {
    @if (data.panier.length > 0) {
        @for (item of data.panier; track item.id_box) {
        <div class="card m-2 p-2">
            <p><strong>Nom :</strong> {{ item.nom }}</p>
            <p><strong>Quantité :</strong> {{ item.quantite }}</p>
            <p><strong>Prix :</strong> {{ item.prix * item.quantite }} €</p>
            <button class="btn btn-cart-custom" (click)="supprimer(item.id_box)">
                  <i class="ph ph-trash"></i>
            </button>
        </div>
        }
        <div class="card m-2 p-2">
        <h3>Total : {{data.total}}</h3>
        <button class="btn btn-success" (click)="payer()">Payer</button>
        </div>
    } @else {
        <p>Votre panier est vide.</p>
    }
    } @else {
    <p>Chargement du panier...</p>
    }
</div>
@if (isOrderValidated) {
    <div class="position-fixed top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center" style="background: rgba(0,0,0,0.85); z-index: 9999; backdrop-filter: blur(4px);">
    <div class="card p-5 text-center shadow-lg" style="width: 90%; max-width: 600px; border-radius: 20px; border: none;">
        <div class="mb-4">
            <i class="ph-fill ph-check-circle text-success" style="font-size: 6rem;"></i>
        </div>
        <h1 class="fw-bold mb-3">Merci !</h1>
        <p class="fs-5 text-secondary">Votre commande a été validée et prise en charge par nos cuisines.</p>
        <div class="alert alert-success py-3 my-4">
        <span class="fs-5">Vous serez livré vers <strong>{{ heureLivraison }}</strong>.</span>
        </div>
        <p class="text-muted mb-4">Merci de votre patience.</p>
        <button class="btn btn-dark btn-lg w-100 shadow-sm"(click)="CloseOverlay()" routerLink="/liste-box">
            Retourner à l'accueil
        </button>
    </div>
    </div>
}
<app-footer></app-footer>
